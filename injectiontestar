-- ✅ Script ESP + Speed + Jump Alto (Team Check + Status nos Botões)
-- ✅ Jogo: Roube Um Brainrot
-- ⚠️ Apenas para testes autorizados

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

-- Configurações iniciais
local espAtivo = false
local speedAtivo = false
local jumpAtivo = false
local speedValor = 50
local jumpValor = 100
local corESP = Color3.fromRGB(255, 0, 0)

-- Interface
local ScreenGui = Instance.new("ScreenGui", game.CoreGui)
ScreenGui.Name = "TesteESP"

local function criarBotao(nome, pos, callback)
    local btn = Instance.new("TextButton", ScreenGui)
    btn.Size = UDim2.new(0, 180, 0, 35)
    btn.Position = pos
    btn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Font = Enum.Font.SourceSansBold
    btn.TextSize = 18
    btn.Text = nome .. ": DESATIVADO"
    btn.MouseButton1Click:Connect(function()
        local status = callback()
        if status then
            btn.Text = nome .. ": ATIVADO"
            btn.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
        else
            btn.Text = nome .. ": DESATIVADO"
            btn.BackgroundColor3 = Color3.fromRGB(170, 0, 0)
        end
    end)
    return btn
end

-- FUNÇÃO ESP
local function criarESP(player)
    local box = Drawing.new("Square")
    box.Thickness = 2
    box.Color = corESP
    box.Filled = false

    RunService.RenderStepped:Connect(function()
        if espAtivo and player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") and player.Team ~= LocalPlayer.Team then
            local pos, vis = Camera:WorldToViewportPoint(player.Character.HumanoidRootPart.Position)
            if vis then
                local humanoid = player.Character:FindFirstChildOfClass("Humanoid")
                local head = player.Character:FindFirstChild("Head")
                if humanoid and head then
                    local headPos = Camera:WorldToViewportPoint(head.Position + Vector3.new(0, 0.5, 0))
                    local legPos = Camera:WorldToViewportPoint(player.Character.HumanoidRootPart.Position - Vector3.new(0, 3, 0))
                    local height = math.abs(headPos.Y - legPos.Y)
                    local width = height / 2
                    box.Size = Vector2.new(width, height)
                    box.Position = Vector2.new(pos.X - width/2, pos.Y - height/2)
                    box.Visible = true
                end
            else
                box.Visible = false
            end
        else
            box.Visible = false
        end
    end)
end

-- Criar ESP para todos os jogadores
for _, p in pairs(Players:GetPlayers()) do
    if p ~= LocalPlayer then
        criarESP(p)
    end
end
Players.PlayerAdded:Connect(function(p)
    if p ~= LocalPlayer then
        criarESP(p)
    end
end)

-- BOTÕES
criarBotao("ESP", UDim2.new(0, 20, 0, 20), function()
    espAtivo = not espAtivo
    return espAtivo
end)

criarBotao("Speed", UDim2.new(0, 20, 0, 60), function()
    speedAtivo = not speedAtivo
    if not speedAtivo and LocalPlayer.Character then
        LocalPlayer.Character:FindFirstChildOfClass("Humanoid").WalkSpeed = 16
    end
    return speedAtivo
end)

criarBotao("Jump", UDim2.new(0, 20, 0, 100), function()
    jumpAtivo = not jumpAtivo
    if not jumpAtivo and LocalPlayer.Character then
        LocalPlayer.Character:FindFirstChildOfClass("Humanoid").JumpPower = 50
    end
    return jumpAtivo
end)

-- Ações constantes
RunService.RenderStepped:Connect(function()
    if speedAtivo and LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid") then
        LocalPlayer.Character.Humanoid.WalkSpeed = speedValor
    end
    if jumpAtivo and LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid") then
        LocalPlayer.Character.Humanoid.JumpPower = jumpValor
    end
end)

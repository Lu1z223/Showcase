-- ESP Script com Interface Simples e Team Check
-- Feito para fins de teste autorizados

-- Configuração
local ESPAtivo = false
local DesenhosESP = {}

-- Interface Simples (GUI)
local function CriarInterface()
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "ESP_Interface"
    screenGui.ResetOnSpawn = false
    screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

    local botao = Instance.new("TextButton")
    botao.Name = "BotaoESP"
    botao.Size = UDim2.new(0, 100, 0, 40)
    botao.Position = UDim2.new(0, 10, 0, 10)
    botao.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    botao.TextColor3 = Color3.fromRGB(255, 255, 255)
    botao.Text = "ESP: OFF"
    botao.Parent = screenGui

    botao.MouseButton1Click:Connect(function()
        ESPAtivo = not ESPAtivo
        botao.Text = ESPAtivo and "ESP: ON" or "ESP: OFF"
    end)
end

-- Função para criar ESP
local function CriarESP(player)
    if player == game.Players.LocalPlayer then return end
    if player.Team == game.Players.LocalPlayer.Team then return end -- Team Check

    local box = Drawing.new("Text")
    box.Text = player.Name
    box.Size = 14
    box.Center = true
    box.Outline = true
    box.Color = Color3.fromRGB(255, 0, 0)

    DesenhosESP[player] = box
end

-- Atualizar ESP
local function AtualizarESP()
    game:GetService("RunService").RenderStepped:Connect(function()
        if not ESPAtivo then
            for _, drawing in pairs(DesenhosESP) do
                drawing.Visible = false
            end
            return
        end

        for _, player in pairs(game.Players:GetPlayers()) do
            local drawing = DesenhosESP[player]
            if not drawing then
                CriarESP(player)
                drawing = DesenhosESP[player]
            end

            local char = player.Character
            local hrp = char and char:FindFirstChild("HumanoidRootPart")
            if hrp then
                local pos, onScreen = workspace.CurrentCamera:WorldToViewportPoint(hrp.Position)
                if onScreen then
                    drawing.Position = Vector2.new(pos.X, pos.Y - 20)
                    drawing.Visible = true
                else
                    drawing.Visible = false
                end
            else
                drawing.Visible = false
            end
        end
    end)
end

-- Remover ESP ao sair
game.Players.PlayerRemoving:Connect(function(player)
    if DesenhosESP[player] then
        DesenhosESP[player]:Remove()
        DesenhosESP[player] = nil
    end
end)

-- Inicializar
CriarInterface()
AtualizarESP()
